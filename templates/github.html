<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GitHub Dashboard</title>
    <style>
        body { font-family: sans-serif; background: #0d1117; color: #c9d1d9; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .card { background: #161b22; padding: 20px; border-radius: 6px; border: 1px solid #30363d; margin-bottom: 20px; }
        input { width: 70%; padding: 10px; background: #0d1117; color: white; border: 1px solid #30363d; border-radius: 6px; }
        button { padding: 10px 20px; background: #238636; color: white; border: none; border-radius: 6px; cursor: pointer; }
        .avatar { width: 80px; height: 80px; border-radius: 50%; border: 2px solid #58a6ff; }
        .stats { display: flex; gap: 20px; margin-top: 15px; }
        .stat-box { background: #0d1117; padding: 10px; border-radius: 6px; flex: 1; text-align: center; border: 1px solid #30363d; }
        .repo-card { background: #0d1117; padding: 10px; margin-top: 10px; border-radius: 6px; border: 1px solid #30363d; }
        a { color: #58a6ff; text-decoration: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>üêô GitHub Dashboard</h1>
            <input type="text" id="username" placeholder="Usuario (ej: torvalds)">
            <button onclick="buscar()">Buscar</button>
        </div>
        <div id="res"></div>
    </div>

    <script>
        async function buscar() {
            const user = document.getElementById('username').value;
            const res = document.getElementById('res');
            res.innerHTML = 'Cargando...';
            
            try {
                const response = await fetch(`/api/github/usuario/${user}`);
                const d = await response.json();
                if (d.error) { res.innerHTML = `Error: ${d.error}`; return; }

                res.innerHTML = `
                    <div class="card">
                        <div style="display:flex; gap:20px; align-items:center;">
                            <img src="${d.avatar}" class="avatar">
                            <h2>${d.nombre}</h2>
                        </div>
                        <div class="stats">
                            <div class="stat-box"><b>${d.repositorios}</b><br>Repos</div>
                            <div class="stat-box"><b>${d.seguidores}</b><br>Seguidores</div>
                            <div class="stat-box"><b>‚≠ê ${d.total_stars}</b><br>Stars</div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üåü Top Repositorios</h3>
                        ${d.repos_destacados.map(r => `
                            <div class="repo-card">
                                <a href="${r.url}" target="_blank"><b>${r.nombre}</b></a> - ‚≠ê ${r.stars} (${r.lenguaje})
                            </div>
                        `).join('')}
                    </div>
                `;
            } catch (e) { res.innerHTML = 'Error de conexi√≥n'; }
        }
    </script>
</body>
</html>